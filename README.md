Домашнее задание к занятию 3 «Резервное копирование»
Цель задания
В результате выполнения этого задания вы научитесь:

Настраивать регулярные задачи на резервное копирование (полная зеркальная копия)
Настраивать инкрементное резервное копирование с помощью rsync
Чеклист готовности к домашнему заданию
Установлена операционная система Ubuntu на виртуальную машину и имеется доступ к терминалу
Сделан клон этой виртуальной машины с другим IP адресом
Инструкция по выполнению домашнего задания
Сделайте fork репозитория c шаблоном решения к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
Выполните клонирование этого репозитория к себе на ПК с помощью команды git clone.
Выполните домашнее задание и заполните у себя локально этот файл README.md:
впишите вверху название занятия и ваши фамилию и имя;
в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
для корректного добавления скриншотов воспользуйтесь инструкцией «Как вставить скриншот в шаблон с решением»;
при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в инструкции по MarkDown.
После завершения работы над домашним заданием сделайте коммит (git commit -m "comment") и отправьте его на Github (git push origin).
Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Задание 1
Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию /tmp/backup
Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)
Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.
На проверку направить скриншот с командой и результатом ее выполнения
Решение 1

Чтобы создать зеркальную копию домашней директории пользователя в директорию /tmp/backup, исключая скрытые директории, и использовать хэш-суммы для проверки идентичности файлов, можно воспользоваться следующей командой rsync:

rsync -avz --delete --ignore-missing-args \
--checksum \
~/ ./* /tmp/backup

Рассмотрим аргументы команды подробнее:

1. -a — архивный режим (аналогичен –archive), который включает множество других опций: -rlptgoD.
   - -r — рекурсивно обрабатывает каталоги.
   - -l — сохраняет ссылки как есть.
   - -p — переносит права доступа, владельцев и группы.
   - -t — использует времена модификации.
   - -g — копирует группу владельца.
   - --devices — передает информацию о устройствах.
   - -o — передача всех атрибутов файла.

2. -v — вывод дополнительной информации о процессе.

3. -z — компрессия данных с использованием gzip.

4. --delete — удаляет файлы на стороне приема, если они отсутствуют на стороне отправки.

5. --ignore-missing-args — игнорирует ошибки, возникающие при отсутствии одного или нескольких аргументов.

6. --checksum — проверяет файлы по контрольным суммам вместо времени модификации и размера. Это гарантирует, что идентичные файлы будут обработаны, даже если их атрибуты совпадают.

7. ~/ ./* — синхронизация всего содержимого домашнего каталога пользователя, включая подкаталоги.

8. /tmp/backup — путь к целевой директории для хранения зеркального образа.

Пример использования этой команды:

 rsync -avz --delete --ignore-missing-args --checksum ~/./* /tmp/backup
sending incremental file list
.
[...]
.gnupg/
.ICEauthority
.local/
.mozilla/
.ssh/
.Xauthority
[...output truncated for brevity...]
###скрины 
![1](https://github.com/user-attachments/assets/68a06bed-c504-44de-83ab-473551aad225)

Задание 2
Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.
Резервная копия должна быть полностью зеркальной
Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции
Резервная копия размещается локально, в директории /tmp/backup
На проверку направить файл crontab и скриншот с результатом работы утилиты.
Решение 2
Для настройки регулярного резервного копирования домашней директории пользователя с помощью `rsync` и `cron` в Ubuntu, выполните следующие шаги:

1. **Создание скрипта резервного копирования**:
   - Создайте файл `rsync_backup.sh` со следующим содержимым:

      #!/bin/bash
       source_dir="$HOME"
      target_dir="/tmp/backup"
       if [[ ! -d "$target_dir" ]] ; then
          mkdir -p "$target_dir"
      fi
      
      rsync -avz --delete --ignore-missing-args --checksum $source_dir/./* $target_dir > /var/log/rsync_backup.log
      echo "Backup completed at $(date)" >> /var/log/rsync_backup.log
      
      exit 0

    - Убедитесь, что у вас есть необходимые разрешения для выполнения этого скрипта:

     chmod +x rsync_backup.sh

2. **Добавление задачи в `crontab`**:
  
crontab -e
 
   - Добавьте следующую строку для ежедневного запуска скрипта в 00:00:

     0 0 * * * /path/to/rsync_backup.sh

3. **Проверка результатов**:

   - После установки задания проверьте логи с помощью команды:

     tail -n 20 /var/log/rsync_backup.log
###скрины 
![2](https://github.com/user-attachments/assets/1b8e0f7b-50f4-4e60-9669-f67e73fcbf9e)
